<body>
    <div id='root'></div>
    <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
    <script type='text/babel'>


        function SavedToDo({ toDo, deleteButton, editSaveButton, handleChange }) {
            const [edit2, setEdit2] = React.useState(null)


            const editButton2 = () => {
                setEdit2(<input type='text' onChange={handleChange} ></input>)
            }

            return (
                <div className='todo'>
                    <h2 >{toDo}</h2>
                    {edit2}
                    <button onClick={deleteButton}>Delete</button>
                    <button onClick={editButton2}>Edit</button>
                    <button onClick={editSaveButton}>Save</button>
                </div>
            )
        }

        function App() {
            const [toDo, setToDo] = React.useState([])
            const [input2, setInput2] = React.useState()
            // const [edit, setEdit] = React.useState(null)
            const input = React.useRef();

            const handleChange = (e) => {
                input.current = e.target.value
            }

            const saveButton = () => {
                setToDo(toDo.concat(input.current))
                input.current = ''
            }

            const deleteButton = (a, index) => {
                setToDo(toDo.filter((x, i) => index != i))
            }

            // const editButton = () => {
            //     setEdit(<input type='text' onChange={handleChange} ></input>)
            // }

            const editSaveButton = (a, index) => {
                setToDo(toDo.map((x, i, array) => i === index ? array[index] = input.current : x))
                // setToDo(toDo.filter((x, i, array) => array[index] = input.current))
            }

            const consoleButton = () => {
                console.log(toDo)
                console.log(toDo.length)
            }

            return <div>
                <button onClick={consoleButton}>Console Todo Checker</button>
                <h1>Your To Do's :</h1>
                <input onChange={handleChange} type="text"></input>
                <button onClick={saveButton}>Save</button>
                {toDo.length > 0 ? toDo.map((x, i, a) =>
                    <SavedToDo
                        toDo={x}
                        key={i}
                        handleChange={handleChange}
                        deleteButton={() => deleteButton(x, i)}
                        editSaveButton={() => editSaveButton(x, i)}
                    // editButton={editButton}
                    // edit={edit}
                    />) : null}
            </div>
        }

        ReactDOM.render(<App />, document.getElementById('root'));

    </script>
</body>

<!-- 

ToDo 4 ToDo:
- After pressing edit, input field must hold the todo value. Setting a preset value does not work as it seems to be inmutable. How to solve?
- Press enter to save.
- Reapply focus on edit button press.
- Bugg: All edit windows opens when pressing edit - try to get only one to open.

To start the server:
npx browser-sync start --server --files "./*.html" --no-open --no-notify --directory

-->