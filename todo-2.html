<body>
    <div id='root'></div>
    <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
    <!-- <script src="https://unpkg.com/prop-types@15.6.1/prop-types.js"></script> -->
    <script type='text/babel'>


        function SavedToDo({ toDo, deleteButton, editButton, edit, editSaveButton }) {

            return (
                <span className='todo'>
                    <h2 >{toDo}</h2>
                    {edit}
                    <button onClick={deleteButton}>Delete</button>
                    <button onClick={editButton}>Edit</button>
                    <button onClick={editSaveButton}>Save</button>
                </span>
            )
        }

        function App() {
            const [toDo, setToDo] = React.useState([])
            const [input2, setInput2] = React.useState()
            const [edit, setEdit] = React.useState(null)
            const focusEditField = React.useRef()
            const input = React.useRef();

            const handleChange = (e) => {
                input.current = e.target.value
            }

            const saveButton = () => {
                setToDo(toDo.concat(input.current))
                input.current = ''
            }

            const deleteButton = (a, index) => {
                setToDo(toDo.filter((x, i) => index != i))
            }

            const editButton = () => {
                setEdit(<input type='text' ref={focusEditField} onChange={handleChange} ></input>)
            }

            const editSaveButton = (a, index) => {

                setToDo(toDo.filter((x, i) => index != i).concat(input.current))
                // setToDo(toDo.filter((x, i) => (index === i) ? (x = input.current) : null))
                // const newTodo = (...toDo)
                // setToDo(toDo = (newTodo[index] = input.current))
            }


            // React.useEffect(() => {
            //     (focusEditField.current === undefined) ? null : focusEditField.current.focus()
            // })

            const consoleButton = () => {
                console.log(toDo)
                console.log(toDo.length)
            }

            return <div>
                <button onClick={consoleButton}>Console Todo Checker</button>
                <h1>Your To Do's :</h1>
                <input onChange={handleChange} type="text"></input>
                <button onClick={saveButton}>Save</button>
                {toDo.length > 0 ? toDo.map((x, i, a) => <SavedToDo toDo={x} key={i} deleteButton={() => deleteButton(x, i)} editSaveButton={() => editSaveButton(x, i)} editButton={editButton} edit={edit} />) : null}
            </div>
        }

        ReactDOM.render(<App />, document.getElementById('root'));

    </script>
</body>

<!-- 

ToDo 4 ToDo:
- After pressing edit, input field must hold the todo value. Setting a preset value does not work as it seems to be inmutable. How to solve?
- Press enter to save.
- Reapply focus on edit button press.
- Bugg: All edit windows opens when pressing edit - try to get only one to open.
- Bugg: Edit button moves edited to last in the array.
-->