<body>
    <div id='root'></div>
    <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
    <script type='text/babel'>

        function SavedToDo({ toDo, deleteButton, editSaveButton, handleChange, index }) {
            const [edit, setEdit] = React.useState(false)


            const editButton = () => {
                setEdit(!edit)
            }

            const editSaveButton2 = () => {
                editSaveButton()
                setEdit(!edit)
            }

            const editDeleteButton = () => {
                setEdit(!edit)
                deleteButton()
            }

            return (
                <div className={index + ' ToDo'}>
                    <h2 >{toDo}</h2>
                    {edit ?
                        <>
                            <input type='text' onChange={handleChange} defaultValue={toDo} />
                            <button onClick={editSaveButton2}>Save</button>
                        </>
                        : <button onClick={editButton}>Edit</button>}
                    <button onClick={editDeleteButton}>Delete</button>

                </div>
            )
        }

        function App() {
            const [toDo, setToDo] = React.useState([])
            const [input2, setInput2] = React.useState()
            const input = React.useRef();
            const [edit, setEdit] = React.useState(false)

            const handleChange = (e) => {
                input.current = e.target.value
            }

            const saveButton = () => {
                setToDo(toDo.concat(input.current))
                input.current = ''
            }

            const deleteButton = (a, index) => {
                setToDo(toDo.filter((x, i) => index != i))
                setEdit(!edit)
            }

            const editSaveButton = (a, index) => {
                setToDo(toDo.map((x, i, array) => i === index ? array[index] = input.current : x))
                // setToDo(toDo.filter((x, i, array) => array[index] = input.current))
                setEdit(!edit)
            }

            const editButton = (a, index, array) => {
                // setEdit(<input type='text' onChange={handleChange} ></input>)
                setEdit(!edit)
            }

            const consoleButton = () => {
                console.log(toDo)
                console.log(toDo.length)
            }

            return <div>
                <button onClick={consoleButton}>Console Todo Checker</button>
                <h1>To Be Done :</h1>
                <input onChange={handleChange} type="text" placeholder='To do ...' />
                <button onClick={saveButton}>Save</button>
                {toDo.length > 0 ? toDo.map((x, i, a) =>
                    <SavedToDo
                        toDo={x}
                        key={i}
                        index={i}
                        handleChange={handleChange}
                        deleteButton={() => deleteButton(x, i)}
                        editSaveButton={() => editSaveButton(x, i)}
                    // editButton={() => editButton(x, i)}
                    // edit={edit}
                    />) : null}
            </div>
        }

        ReactDOM.render(<App />, document.getElementById('root'));

    </script>
</body>

<!-- 

ToDo 4 ToDo:
- Press enter to save.
- Reapply focus on edit button press.

To start the server:
npx browser-sync start --server --files "./*.html" --no-open --no-notify --directory

-->